(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[33],{115:function(e,a,t){},142:function(e,a,t){"use strict";t.r(a);var n=t(4),r=t(7),c=t(0),s=t.n(c),i=t(9),o=t(1),l=t(6),_=t(56),m=t(11),f=(t(115),t(8)),u=t.n(f),w=t(12),h=t(13),d=t(5),x=function(e){var a=e.page,t=e.callback,n=e.keyword;return function(){var e=Object(w["a"])(u.a.mark((function e(r){var c;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])("get","wx/search/list?page=".concat(a,"&keyword=").concat(n));case 2:c=e.sent,Object(m["b"])(!1),t(!1),0===c.errno&&(r({type:d["F"],payload:c.data}),r(p()));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},p=function(){return function(){var e=Object(w["a"])(u.a.mark((function e(a){var t;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])("get","wx/search/index");case 2:t=e.sent,0===t.errno&&a({type:d["t"],payload:t.data.historyKeywordList});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},g=function(){return function(){var e=Object(w["a"])(u.a.mark((function e(a){var t;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])("post","wx/search/clearhistory");case 2:t=e.sent,0===t.errno&&a({type:d["i"]});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},b=function(){return function(e){e({type:d["e"]})}},y=t(29),E=t(2),N=t.p+"assets/images/search_0.png",C=t(30),V=t(23),S=function(e){var a=e.dispatchDeleteHistory,t=e.dispatchClearSearch,n=e.dispatchFetchHistory,i=e.dispatchSearch,m=(e.historyList,e.searchList),f=e.nowPage,u=e.maxPage,w=Object(c["useState"])(""),h=Object(r["a"])(w,2),d=h[0],x=h[1],p=Object(c["useState"])(!1),g=Object(r["a"])(p,2),b=g[0],S=g[1],j=Object(c["useState"])(!1),k=Object(r["a"])(j,2),O=k[0],v=k[1],P=Object(c["useState"])(!1),L=Object(r["a"])(P,2),T=L[0],B=L[1],H=Object(c["useState"])({}),I=Object(r["a"])(H,2),A=I[0],F=I[1],D=function(e,a){F({type:e,info:a,page:"other"}),B(!0)},J=function(e){B(e)};Object(c["useEffect"])((function(){n()}),[]),Object(E["useReachBottom"])((function(){f<u?(S(!0),v(!1),i({page:f+1,keyword:d,callback:function(e){return S(e)}})):(S(!0),v(!0))}));var K=function(){a()},M=function(){0!==d.trim().length&&i({page:1,keyword:d,callback:function(e){return S(e)}})},R=function(e){t(),x(e)};return s.a.createElement(o["View"],null,s.a.createElement(o["View"],{className:"search_wrap bgc_yellow"},s.a.createElement(l["AtSearchBar"],{focus:!0,value:d,onChange:R,onConfirm:M,onActionClick:M})),0===d.length?s.a.createElement(o["View"],null,s.a.createElement(o["View"],{className:"flex between padding_xs"},s.a.createElement(o["View"],{className:"search_tit fontS_36 fontC_70"},"\u70ed\u95e8\u641c\u7d22"),s.a.createElement(o["Image"],{onClick:K,className:"search_delete",src:_["a"]})),s.a.createElement(o["View"],{className:"flex flex_wrap padding_row_xs"},s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u5c0f\u5403"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u8fa3\u6761"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u65b9\u4fbf\u9762"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u85af\u7247"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u70e7\u70e4"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u53ef\u4e50"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u70e4\u80a0"),s.a.createElement(o["View"],{className:"search_history fontS_20 border_10 fontC_white padding_row_xxs margin_xxs"},"\u51b0\u6dc7\u6dcb"))):s.a.createElement(o["View"],{className:"padding_row_s padding_column_xxs flex direction_column"},0!==m.length?m.map((function(e){return s.a.createElement(o["View"],{key:e.id,className:"flex center_column padding_column_xxs padding_row_xs search_item_wrap bgc_white border_10"},s.a.createElement(o["Image"],{className:"search_item_img flex_grow_shrink bgc_f4",onClick:function(){return Object(V["b"])(e.id)},src:e.picUrl}),s.a.createElement(o["View"],{className:"flex_grow flex direction_column min-width"},s.a.createElement(o["View"],{className:"flex_grow"},s.a.createElement(o["View"],null,s.a.createElement(o["View"],{className:"padding_row_xs fontC_26px flex"},s.a.createElement(o["Text"],{className:"ellipsis"},e.name)),s.a.createElement(o["View"],{className:"padding_row_xs fontS_20 fontC_91 flex"},s.a.createElement(o["Text"],{className:"ellipsis"},e.brief))),s.a.createElement(o["View"],{className:"padding_xs flex between center_column"},s.a.createElement(o["Text"],{className:"fontC_orange fontS_36"},"\xa5 ",e.nowPrice))),s.a.createElement(o["View"],{className:"flex direction_row_reverse"},s.a.createElement(o["View"],{className:"search_item_btn bgc_orange fontC_white fontS_24 border_10 flex center",onClick:function(){return D("purchase",e)}},"\u8d2d\u4e70"),s.a.createElement(o["View"],{className:"search_item_btn bgc_yellow fontC_white fontS_24 border_10 flex center margin_row_xs",onClick:function(){return D("add",e)}},"\u6dfb\u52a0"))))})):s.a.createElement(o["View"],{className:"search_null_img_wrap flex direction_column center"},s.a.createElement(o["Image"],{className:"search_null_img",src:N}),s.a.createElement(o["Text"],{className:"fontS_24 fontC_gray_c6"},"\u6362\u4e2a\u8bcd\u8bed\u8bd5\u8bd5\u5427~")),s.a.createElement(C["a"],{openAdd:T,callback:function(e){return J(e)},addInfo:A}),s.a.createElement(y["a"],{showLoad:b,showNoMore:O})))},j=Object(i["b"])((function(e){return{historyList:e.search.historyList,searchList:e.search.searchList,nowPage:e.search.nowPage,maxPage:e.search.maxPage}}),(function(e){return{dispatchDeleteHistory:function(){e(g())},dispatchFetchHistory:function(){e(p())},dispatchSearch:function(a){e(x(a))},dispatchClearSearch:function(){e(b())}}}))(S),k={navigationBarTitleText:"\u641c\u7d22",backgroundColor:"#fdb200",navigationBarTextStyle:"white",navigationBarBackgroundColor:"#fdb200"};Page(Object(n["createPageConfig"])(j,"pages/search/index",{},k||{}))}},[[142,0,1,2,3]]]);